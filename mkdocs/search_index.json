{
    "docs": [
        {
            "location": "/", 
            "text": "SW startup guide for Vayu 2G\n\n\nFor a quick guide to starting with the Vayu 2G cape's HW, see \n\nLeaflet for 2G cape.\n\n\nBelow, we describe how to set up the 2G capes and its associated software. \n\n\nSoftware overview for using Vayu-2G-A/Vayu-2GP-A Cape\n\n\nData connection is established based on PPP protocols. Wvdial is mainly used to configure the dialup settings. For setting up various settings for PPP connection and establishing a data connection on these capes follow the link to the wiki\n\n\n\n\n\n\nWay to setup the Vayu 2G Capes\n\n\n\n\n\n\nHow to read location and coarse time as NMEA-0183 message from the serial UART ttyO4 port\n\n\n\n\n\n\nHow to write wvdial conf files for any network\n\n\n\n\n\n\nSample wvdial.conf file for \n\nAT\nT\n \nand \n\nT-Mobile USA\n\n\n\n\n\n\nFor using the Vayu-2G-A/Vayu-2GP-A Cape, please ensure that you have the following :\n\n\n\n\n\n\nPPS drivers enabled in kernel, required if GPS module is present.\n\n\n\n\n\n\nVayu Device tree overlay file\n\n\n\n\n\n\nYou can either download kernel patches containing the same to use with your existing images or you can download our prebuilt MicroSD card image or EMMC flasher image.\n\n\nAll the images and files and extra support on software can be found here :\n\nVayu_Cape_SW_images_and_drivers\n\n\nDevice enable for Vayu-2G-A/Vayu-2GP-A Cape\n\n\nSetting up the system\n\n\n\n\n\n\nPlace a mini sim in the sim card slot and connect a GSM antenna to the SMA connector.\n\n\n\n\n\n\nMount the cape on BBB carefully.\n\n\n\n\n\n\nEnsuring that the power jumper on the cape is in its place, power up the setup using a 5V DC adapter(min 2.5A) to barrel jack. D2 LED on the cape will glow alongwith LEDs on the Beaglebone black.\n\n\n\n\n\n\nNote\n: Before proceeding further ensure D2 LED is glowing properly. Make sure that the adapter being used is of proper rating and has been connected properly. Further check for the presence of the power jumper(#12 on leaflet).\n\n\nNote\n: Do not try to power up using USB cable alone. Always power up system with a DC adapter. Also while disconnecting power, USB cable should be removed before the DC adapter.\n\n\nGSM/GPRS Modem\n\n\nNote\n: All commands are executed as root on Debian unless otherwise mentioned.\n\n\nGSM/GPRS Modem is connected to Beaglebone Black at UART1 port. To access the Modem from Beaglebone Black, we need to first enable the UART1 (ttyO1) port in kernel. For this do following :\n\n\nStep 1.\n Boot into Beaglebone Black , running Debian Wheezy on it. Login as root user\n\n\nStep 2.\n Go to /lib/firmware\n\n\n    cd /lib/firmware\n\n\n\nStep 3.\n After ensuring that file BB-UART1-00A0.dtbo exists, apply the device tree overlay as :\n\n\n    echo BB-UART1 \n /sys/devices/bone_capemgr.9/slots\n\n\n\nStep 4.\n On reading \u2018\u2019\u2019slots\u2019\u2019\u2019 if you are able to see UART1 , then it has been applied successfully.\n\n\n    cat /sys/devices/bone_capemgr.9/slots\n\n\n\nStep 5.\n You can verify that UART1 (ttyO1 ) by checking for ttyO1 in devices (/dev/)\n\n\n    ls /dev/ttyO*\n\n\n\nOutput will show /dev/ttyO0 and /dev/ttyO1 .\n\n\nOver UART1 port we can communicate with the modem and also AT commands can be executed whenever required. The UART port of modem is available at one instant only, either it is establishing ppp connection or AT commands are executed on it. We now see and understand different modes for controlling the GPS/GPRS Modem and ensure that it is properly powered on and available for establishing data connection. \n\n\nThe Modem has different operating modes:\n\n\n\n\nTo use the modem after powering up the Cape, it needs to be properly turned on.\n\n\nFor the Modem , there is a ON/OFF pin and a Reset pin which are used to turn the modem on/off or soft reset and hard reset it. Now, on the Vayu Cape, there are two Leds which indicate status of 2G module :\n\n\ni. \nSTATUS LED D3 \n: This Led gives the state of the Modem. It is on when the module is turned on and off when it is turned off.\n\n\nii. \nNETLIGHT LED D4\n : It has different states depending on the mode of operation of the Modem :-\n\n\na. Off when Modem is off\n\n\nb. 64ms ON/800ms OFF when Modem is on but it is not registered on a network i.e. sim card has not been detected or is not present\n\n\nc. 64ms ON/3000ms OFF when Modem is on and is registered to a network i.e. sim card has been detected but a network connection has not been established.\n\n\nd. 64ms ON/300ms OFF when Modem is on and GPRS communication has been established.\n\n\nOn the Cape, ON/OFF pin and Reset pin can be controlled via a push button switch as well as GPIOs assigned to them on Beaglebone Black. For ON/OFF pin, S1 is the ON/OFF push button switch provided on cape and GPIO45 in Beaglebone Black is assigned the same. \nGPIO45 should always be set high. \nFor Reset pin, S2 is the Hard Reset push button switch provided on cape and GPIO60 in Beaglebone Black is assigned the same. \nGPIO60 should always be set high.\n\n\nTo Power on Modem :\n\n\nUser can Power on or off the modem by hardware push button or by software method (prefered)\n\n\n\n\n\n\nBy pressing the switch S1 for atleast 1s and then releasing it after Beaglebone Black is booted properly\n\n\n\n\n\n\nBy setting GPIO45 \u2018Active Low\u2019 for atleast 1s and then setting it \u2018Active high\u2019. \n\n\n\n\n\n\nAlso, when Cape and Beaglebone black, both are powered up and booted, GPIO45 is initially set low internally.\n\n\nStep 6\n: Set GPIO45 High, after Beaglebone Black has booted completely with Vayu Cape mounted on it to turn on the modem properly.\n\n\nStep 7\n: Once ttyO1 port was enabled, you can execute AT commands for the modem on it or see the messages from the modem that are sent there. You can use minicom for it.\n\n\n    apt-get install minicom\n\n    minicom \u2013s\n\n\n\nand set serial port settings as /dev/ttyO1 115200 8N1 When you , properly turn on the modem after you have booted i.e. set GPIO45 high, or whenever modem is turned ON , you will see an output on /dev/ttyO1 port. RDY Power On of Modem is indicated by the STATUS GPIO or LED which should be ON . Also the NETLIGHT LED will start blinking depending on whether SIM Card is present or not. \n\n\nTo power off Modem :\n\n\nModem can be powered off by :\n\n\n1) Normal power down procedure :\n\n\n\n\nPower down by ON/OFF Pin : \n\n\n\n\ni. Press the switch S1 for atleast 1s and then release it\n\n\nii. Set GPIO45 low for atleast 1s and set it high\n\n\n\n\nPower down by AT command : AT+CPOWD=1 , at /dev/ttyO1\n\n\n\n\n2) Abnormal Power down procedure :\n\n\n\n\n\n\nOver-voltage or under-voltage automatic power down\n\n\n\n\n\n\nover-temperature or under-temperature automatic power down\n\n\n\n\n\n\nIn Normal Power down, the modem port /dev/ttyO1 will read out the following message :\n\n\n   NORMAL POWER DOWN\n\n\n\nIn Abnormal Power down Procedure , AT commands cannot be issued anymore, only RTC is active.\n\n\nFollowing URC will be reported :\n\n\nIf voltage \n= 3.3V, UNDER-VOLTAGE WARNING\n\n\nIf voltage \n= 4.7V, OVER-VOLTAGE WARNING\n\n\nIf voltage \n 3.2V, UNDER-VOLTAGE POWERDOWN\n\n\nIf voltage \n 4.8V, OVER-VOLTAGE POWERDOWN\n\n\nIf temperature \n 80degree Celsius , +CMTE:1\n\n\nIf temperature \n -30degree Celsius , +CMTE:-1\n\n\nIf temperature \n +85degree Celsius, +CMTE:2\n\n\nIf temperature \n -40degree Celsius, _CMTE:-2\n\n\nPower down of Modem is indicated by STATUS LED not glowing or GPIO going low. Also, NETLIGHT LED will be Off.\n\n\nSoft Reset the Modem :\n\n\n\n\n\n\nPower Down the Module\n\n\n\n\n\n\nWait for atleast 800ms after STATUS LED switched off or GPIO went low\n\n\n\n\n\n\nPower On the Module \n\n\n\n\n\n\nHard Reset the Modem:\n\n\nThis is an emergency reset only.Use this only when ON/OFF pin or \u201cAT+CPOWD=1\u201d have no effect.\n\n\n\n\n\n\nThe Hard reset pin can be pulled low for atleast 1.2s and then set high.\n\n\n\n\n\n\nGPIO60 should be high all the time. S2 is Hard reset push button switch for Modem.\n\n\n\n\n\n\nNote :\n The GPRS modem on the cape has been shipped pre-set with settings so that its serial port is working and appropriate settings has been stored in the modem. For more details about its operation modes refer to datasheet.\n\n\nIf SIM900A has been set to minimum functionality by \u201cAT+CFUN=0\u201d, the RF function and SIM card function will be closed. In this case, the serial port is still accessible, but all AT commands correlative with RF function or SIM card function will not be accessible. For SIM900A, it requests to set AT command \u201cAT+CSCLK=1\u201d to enable the sleep mode; the default value is 0, that can\u2019t make the module enter sleep mode\n\n\nTo change the modes or any settings related to modem , you need access to AT ports and run AT commands there.\n\n\nConsidering that, Cape is connected properly to Beaglebone black and user is logged in as root and has checked for UART1 port, we check that the Modem is turned on properly before trying to establish a connection, so:\n\n\ni. D3 is continuously glowing and D4 is blinking as 64ms ON/800ms OFF, when SIM card is not present or not detected/inserted properly.\n\n\nii. D3 is continuously glowing and D4 is blinking as 64ms ON/3000 ms OFF when a valid SIM card is present. If SIM card was inserted while the modem was on, please software reset the modem by turning it OFF and then ON again using Software GPIO commands or Push button switch. [refer to]\n\n\nIf any other state of LEDs is present, please soft reset the modem using push button switch or GPIOs.\n\n\nSo when it is established that modem is in ii  state , now we try to establish connection\n\n\nSummarizing, following are the steps to enable PPP connection using the Modem :\n\n\nStep 1 :\n Ensure that a GSM/GPRS enabled SIM card is placed in the simcard slot, before Beaglebone black is booted up with the cape.\n\n\nStep 2 :\nEnable UART1(/dev/ttyO1 ) in the kernel by applying its device tree overlay from /lib/firmware directory.\n\n\nStep 3:\n Check for the status of the LEDs, D3(STATUS) and D4(NETLIGHT). D3 should be high and D4 should be blinking. If no sim card is present, and D4 blinks accordingly, then insert the sim card in the slot and Soft Reset the Modem.\n\n\nStep 4 :\n Now we have to ensure that the modem is properly switched on. The GPIO45 is pulled low in Beaglebone black when it has booted , but ON/OFF Pin in modem also has internal pullup so basically it is turned on when the Board boots up. But to be safe, we have to set the GPIO45 high.\n\n\nWhen you turn GPIO45 high, check once again that setting the ON/OFF pin high, completed the Power ON cycle for the modem and not the Power OFF cycle, by checking the STATUS LED which should still be ON.\n\n\nStep 5:\n Once it has been ensured modem is properly switched on, we can proceed with establishing PPP connection either using PPPd or Wvdial. For more details on using them, please refer to Application notes for 2G/2GP cape. \n\n\nAll the images and files and extra support on software can be found here :\n\nclick here\n \n\n\nWvdial Configuration for Debian Wheezy\n\n\nNote :\n All commands are recommended to be executed as root user.\n\n\nDownload and install Wvdial\n\n\n    $ apt-get install wvdial\n\n\n\nExecuting the following command usually sets the wvdial.conf file which is used for dialing to GPRS communication, but since here our modem port is on a UART(/dev/ttyO1) and not on /dev/ttyS\n or /dev/ttyUSB\n ports, we will have to manually configure it.\n\n\n    $ wvdialconf\n\n\n\nSo, open the wvdial.conf file\n\n\n    $ nano /etc/wvdial.conf\n\n\n\nConsidering that, you have the USERNAME, PASSWORD and APN available for the service provider of the sim card being used, edit and make wvdial.conf file like this.\n\n\n    [Dialer Defaults]\n    Modem Type = Analog\n    ModemPhone = *99#\n    ISDN = 0\n    Baud = 115200\n    Username = USERNAME\n    Password = PASSWORD\n    Modem = /dev/ttyO1\n    Init1 = ATZ\n    Init2 = at+cgdcont=1,\"ip\",\"APN\"\n    Stupid Mode = 1\n\n\n\nUsually for GSM Networks, Modemphone is \n99# or \n99***1# After editing save and exit, now run wvdial for establishing communication.\n\n\n    $ wvdial\n\n\n\nYou can also edit the wvdial.conf file for multiple service providers by providing its name here [Dialer Defaults] : \n\n\n    [Dialer Vodafone]\n    Modem Type = Analog Modem\n    Phone = *99#\n    ISDN = 0\n    Baud = 115200\n    Username = 0\n    Password = 0\n    Modem = /dev/ttyO1\n    Init1 = ATZ\n    Init2 = at+cgdcont=1,\"ip\",\"www\"\n    Stupid Mode = 1\n    [Dialer Airtel]\n    Modem Type = Analog Modem\n    Phone = *99#\n    ISDN = 0\n    Baud = 115200\n    Username = airtel\n    Password = airtel\n    Modem = /dev/ttyO1\n    Init1 = ATZ\n    Init2 = at+cgdcont=1,\"ip\",\"airtelgprs.com\"\n    Stupid Mode = 1\n\n\n\nAnd run wvdial for the required service provider as follows:\n\n\n    wvdial airtel\n\n\n\nA list of running commands should be visible on the shell, trying to establish PPP connection. Once PPP connection has been established, you will see a ppp0 IP. To check the status of wvdial and find out its IP open a new shell and use either of following:\n\n\nRun ifconfig and find ppp0 in the list of network connections.\n\n\n    $ ifconfig\n\n\n\nor\n\n\n    $ ifconfig ppp0\n\n\n\nCheck the network statistics for IP and their gateways and check the Iface column for ppp0\n\n\n    $ netstat -arn\n    * Kernel IP routing table\n\n    Destination Gateway Genmask Flags MSS Window irtt Iface\n    0.0.0.0 192.168.1.1 0.0.0.0 UG 0 0 0 eth0\n    192.168.1.0 0.0.0.0 255.255.255.0 U 0 0 0 eth0\n    192.168.7.0 0.0.0.0 255.255.255.252 U 0 0 0 usb0\n    192.200.1.21 0.0.0.0 255.255.255.255 UH 0 0 0 ppp0\n\n\n\n\n\nRead the system messages as\n$ cat /var/log/messages\n\n\n\n\n\n\n\nIt lists all the attempts at establishing ppp communication using the modem and ips for the successful attempt. Now all that is left, is to route the network traffic over the gateway of ppp0 instead of eth0 so that GPRS communication is fully completed.\n\n\nPPP connection has been established over GPRS using 2G module and wvdial.\n\n\nAfter PPP has been established, the following is the status of the LEDs and GPIOs\n\n\n\n\n\n\nSTATUS LED D3 \u2013 It is continuously glowing, once the Modem was turned on.\n\n\n\n\n\n\nSIGNAL LED D4 \u2013 It is now blinking at 64ms ON/300ms OFF . Earlier when PPP was not established but SIMcard was detected by modem, then it was blinking at 64ms ON/3000ms OFF.\n\n\n\n\n\n\nSTATUS GPIO23 \u2013 Its value is be 1, once modem was turned on.\n\n\n\n\n\n\nON/OFF GPIO45 \u2013 Its value should be 1.\n\n\n\n\n\n\nRESET GPIO60 \u2013 Its value should always be 1.\n\n\n\n\n\n\nYou can alternately run wvdial for multiple service providers and store their wvdial.conf files too by this way also\n\n\n    $ wvdial -C /etc/wvdial.conf.provider_name\n\n\n\nwhere wvdial.conf.provider_name is wvdial.conf for the SIM card currently inserted. Also, you can Wvdial in background to free up the shell instead of opening another new shell by :\n\n\n    $ wvdial \n disown\n\n\n\n\n\nFAQ\n\n\nQues) How do I check that whether the PPP connection has been established or not?\n\n\nAns)\n\n\n1) Use the command \u201cifconfig ppp0\u201d to check the network information. If a connection is established, an IP should be visible.\n\n\n2) Details about the connection can be found in \u201c/var/log/messages\u201d. Issue following command :\n\n\n\u201ctail \u2013f /var/log/messages\u201d\n\n\nQues) How do I configure the ppp connection for my sim card operator?\n\n\nAns)\n You would mainly require the Username, Password and APN of the service provider to establish a PPP connection. Ensure \u201cwvdial\u201d package is installed.\n\n\n    \u201cdpkg \u2013l | grep wvdial\u201d\n\n\n\nIf wvdial is present, issue \u201cwvdialconf\u201d command. Then update the service provider information in the \"/etc/wvdial.conf\" file and you are good to go.", 
            "title": "Home"
        }, 
        {
            "location": "/#sw-startup-guide-for-vayu-2g", 
            "text": "For a quick guide to starting with the Vayu 2G cape's HW, see  Leaflet for 2G cape.  Below, we describe how to set up the 2G capes and its associated software.", 
            "title": "SW startup guide for Vayu 2G"
        }, 
        {
            "location": "/#software-overview-for-using-vayu-2g-avayu-2gp-a-cape", 
            "text": "Data connection is established based on PPP protocols. Wvdial is mainly used to configure the dialup settings. For setting up various settings for PPP connection and establishing a data connection on these capes follow the link to the wiki    Way to setup the Vayu 2G Capes    How to read location and coarse time as NMEA-0183 message from the serial UART ttyO4 port    How to write wvdial conf files for any network    Sample wvdial.conf file for  AT T  \nand  T-Mobile USA    For using the Vayu-2G-A/Vayu-2GP-A Cape, please ensure that you have the following :    PPS drivers enabled in kernel, required if GPS module is present.    Vayu Device tree overlay file    You can either download kernel patches containing the same to use with your existing images or you can download our prebuilt MicroSD card image or EMMC flasher image.  All the images and files and extra support on software can be found here : Vayu_Cape_SW_images_and_drivers", 
            "title": "Software overview for using Vayu-2G-A/Vayu-2GP-A Cape"
        }, 
        {
            "location": "/#device-enable-for-vayu-2g-avayu-2gp-a-cape", 
            "text": "Setting up the system    Place a mini sim in the sim card slot and connect a GSM antenna to the SMA connector.    Mount the cape on BBB carefully.    Ensuring that the power jumper on the cape is in its place, power up the setup using a 5V DC adapter(min 2.5A) to barrel jack. D2 LED on the cape will glow alongwith LEDs on the Beaglebone black.    Note : Before proceeding further ensure D2 LED is glowing properly. Make sure that the adapter being used is of proper rating and has been connected properly. Further check for the presence of the power jumper(#12 on leaflet).  Note : Do not try to power up using USB cable alone. Always power up system with a DC adapter. Also while disconnecting power, USB cable should be removed before the DC adapter.  GSM/GPRS Modem  Note : All commands are executed as root on Debian unless otherwise mentioned.  GSM/GPRS Modem is connected to Beaglebone Black at UART1 port. To access the Modem from Beaglebone Black, we need to first enable the UART1 (ttyO1) port in kernel. For this do following :  Step 1.  Boot into Beaglebone Black , running Debian Wheezy on it. Login as root user  Step 2.  Go to /lib/firmware      cd /lib/firmware  Step 3.  After ensuring that file BB-UART1-00A0.dtbo exists, apply the device tree overlay as :      echo BB-UART1   /sys/devices/bone_capemgr.9/slots  Step 4.  On reading \u2018\u2019\u2019slots\u2019\u2019\u2019 if you are able to see UART1 , then it has been applied successfully.      cat /sys/devices/bone_capemgr.9/slots  Step 5.  You can verify that UART1 (ttyO1 ) by checking for ttyO1 in devices (/dev/)      ls /dev/ttyO*  Output will show /dev/ttyO0 and /dev/ttyO1 .  Over UART1 port we can communicate with the modem and also AT commands can be executed whenever required. The UART port of modem is available at one instant only, either it is establishing ppp connection or AT commands are executed on it. We now see and understand different modes for controlling the GPS/GPRS Modem and ensure that it is properly powered on and available for establishing data connection.   The Modem has different operating modes:   To use the modem after powering up the Cape, it needs to be properly turned on.  For the Modem , there is a ON/OFF pin and a Reset pin which are used to turn the modem on/off or soft reset and hard reset it. Now, on the Vayu Cape, there are two Leds which indicate status of 2G module :  i.  STATUS LED D3  : This Led gives the state of the Modem. It is on when the module is turned on and off when it is turned off.  ii.  NETLIGHT LED D4  : It has different states depending on the mode of operation of the Modem :-  a. Off when Modem is off  b. 64ms ON/800ms OFF when Modem is on but it is not registered on a network i.e. sim card has not been detected or is not present  c. 64ms ON/3000ms OFF when Modem is on and is registered to a network i.e. sim card has been detected but a network connection has not been established.  d. 64ms ON/300ms OFF when Modem is on and GPRS communication has been established.  On the Cape, ON/OFF pin and Reset pin can be controlled via a push button switch as well as GPIOs assigned to them on Beaglebone Black. For ON/OFF pin, S1 is the ON/OFF push button switch provided on cape and GPIO45 in Beaglebone Black is assigned the same.  GPIO45 should always be set high.  For Reset pin, S2 is the Hard Reset push button switch provided on cape and GPIO60 in Beaglebone Black is assigned the same.  GPIO60 should always be set high.  To Power on Modem :  User can Power on or off the modem by hardware push button or by software method (prefered)    By pressing the switch S1 for atleast 1s and then releasing it after Beaglebone Black is booted properly    By setting GPIO45 \u2018Active Low\u2019 for atleast 1s and then setting it \u2018Active high\u2019.     Also, when Cape and Beaglebone black, both are powered up and booted, GPIO45 is initially set low internally.  Step 6 : Set GPIO45 High, after Beaglebone Black has booted completely with Vayu Cape mounted on it to turn on the modem properly.  Step 7 : Once ttyO1 port was enabled, you can execute AT commands for the modem on it or see the messages from the modem that are sent there. You can use minicom for it.      apt-get install minicom\n\n    minicom \u2013s  and set serial port settings as /dev/ttyO1 115200 8N1 When you , properly turn on the modem after you have booted i.e. set GPIO45 high, or whenever modem is turned ON , you will see an output on /dev/ttyO1 port. RDY Power On of Modem is indicated by the STATUS GPIO or LED which should be ON . Also the NETLIGHT LED will start blinking depending on whether SIM Card is present or not.   To power off Modem :  Modem can be powered off by :  1) Normal power down procedure :   Power down by ON/OFF Pin :    i. Press the switch S1 for atleast 1s and then release it  ii. Set GPIO45 low for atleast 1s and set it high   Power down by AT command : AT+CPOWD=1 , at /dev/ttyO1   2) Abnormal Power down procedure :    Over-voltage or under-voltage automatic power down    over-temperature or under-temperature automatic power down    In Normal Power down, the modem port /dev/ttyO1 will read out the following message :     NORMAL POWER DOWN  In Abnormal Power down Procedure , AT commands cannot be issued anymore, only RTC is active.  Following URC will be reported :  If voltage  = 3.3V, UNDER-VOLTAGE WARNING  If voltage  = 4.7V, OVER-VOLTAGE WARNING  If voltage   3.2V, UNDER-VOLTAGE POWERDOWN  If voltage   4.8V, OVER-VOLTAGE POWERDOWN  If temperature   80degree Celsius , +CMTE:1  If temperature   -30degree Celsius , +CMTE:-1  If temperature   +85degree Celsius, +CMTE:2  If temperature   -40degree Celsius, _CMTE:-2  Power down of Modem is indicated by STATUS LED not glowing or GPIO going low. Also, NETLIGHT LED will be Off.  Soft Reset the Modem :    Power Down the Module    Wait for atleast 800ms after STATUS LED switched off or GPIO went low    Power On the Module     Hard Reset the Modem:  This is an emergency reset only.Use this only when ON/OFF pin or \u201cAT+CPOWD=1\u201d have no effect.    The Hard reset pin can be pulled low for atleast 1.2s and then set high.    GPIO60 should be high all the time. S2 is Hard reset push button switch for Modem.    Note :  The GPRS modem on the cape has been shipped pre-set with settings so that its serial port is working and appropriate settings has been stored in the modem. For more details about its operation modes refer to datasheet.  If SIM900A has been set to minimum functionality by \u201cAT+CFUN=0\u201d, the RF function and SIM card function will be closed. In this case, the serial port is still accessible, but all AT commands correlative with RF function or SIM card function will not be accessible. For SIM900A, it requests to set AT command \u201cAT+CSCLK=1\u201d to enable the sleep mode; the default value is 0, that can\u2019t make the module enter sleep mode  To change the modes or any settings related to modem , you need access to AT ports and run AT commands there.  Considering that, Cape is connected properly to Beaglebone black and user is logged in as root and has checked for UART1 port, we check that the Modem is turned on properly before trying to establish a connection, so:  i. D3 is continuously glowing and D4 is blinking as 64ms ON/800ms OFF, when SIM card is not present or not detected/inserted properly.  ii. D3 is continuously glowing and D4 is blinking as 64ms ON/3000 ms OFF when a valid SIM card is present. If SIM card was inserted while the modem was on, please software reset the modem by turning it OFF and then ON again using Software GPIO commands or Push button switch. [refer to]  If any other state of LEDs is present, please soft reset the modem using push button switch or GPIOs.  So when it is established that modem is in ii  state , now we try to establish connection  Summarizing, following are the steps to enable PPP connection using the Modem :  Step 1 :  Ensure that a GSM/GPRS enabled SIM card is placed in the simcard slot, before Beaglebone black is booted up with the cape.  Step 2 : Enable UART1(/dev/ttyO1 ) in the kernel by applying its device tree overlay from /lib/firmware directory.  Step 3:  Check for the status of the LEDs, D3(STATUS) and D4(NETLIGHT). D3 should be high and D4 should be blinking. If no sim card is present, and D4 blinks accordingly, then insert the sim card in the slot and Soft Reset the Modem.  Step 4 :  Now we have to ensure that the modem is properly switched on. The GPIO45 is pulled low in Beaglebone black when it has booted , but ON/OFF Pin in modem also has internal pullup so basically it is turned on when the Board boots up. But to be safe, we have to set the GPIO45 high.  When you turn GPIO45 high, check once again that setting the ON/OFF pin high, completed the Power ON cycle for the modem and not the Power OFF cycle, by checking the STATUS LED which should still be ON.  Step 5:  Once it has been ensured modem is properly switched on, we can proceed with establishing PPP connection either using PPPd or Wvdial. For more details on using them, please refer to Application notes for 2G/2GP cape.   All the images and files and extra support on software can be found here : click here", 
            "title": "Device enable for Vayu-2G-A/Vayu-2GP-A Cape"
        }, 
        {
            "location": "/#wvdial-configuration-for-debian-wheezy", 
            "text": "Note :  All commands are recommended to be executed as root user.  Download and install Wvdial      $ apt-get install wvdial  Executing the following command usually sets the wvdial.conf file which is used for dialing to GPRS communication, but since here our modem port is on a UART(/dev/ttyO1) and not on /dev/ttyS  or /dev/ttyUSB  ports, we will have to manually configure it.      $ wvdialconf  So, open the wvdial.conf file      $ nano /etc/wvdial.conf  Considering that, you have the USERNAME, PASSWORD and APN available for the service provider of the sim card being used, edit and make wvdial.conf file like this.      [Dialer Defaults]\n    Modem Type = Analog\n    ModemPhone = *99#\n    ISDN = 0\n    Baud = 115200\n    Username = USERNAME\n    Password = PASSWORD\n    Modem = /dev/ttyO1\n    Init1 = ATZ\n    Init2 = at+cgdcont=1,\"ip\",\"APN\"\n    Stupid Mode = 1  Usually for GSM Networks, Modemphone is  99# or  99***1# After editing save and exit, now run wvdial for establishing communication.      $ wvdial  You can also edit the wvdial.conf file for multiple service providers by providing its name here [Dialer Defaults] :       [Dialer Vodafone]\n    Modem Type = Analog Modem\n    Phone = *99#\n    ISDN = 0\n    Baud = 115200\n    Username = 0\n    Password = 0\n    Modem = /dev/ttyO1\n    Init1 = ATZ\n    Init2 = at+cgdcont=1,\"ip\",\"www\"\n    Stupid Mode = 1\n    [Dialer Airtel]\n    Modem Type = Analog Modem\n    Phone = *99#\n    ISDN = 0\n    Baud = 115200\n    Username = airtel\n    Password = airtel\n    Modem = /dev/ttyO1\n    Init1 = ATZ\n    Init2 = at+cgdcont=1,\"ip\",\"airtelgprs.com\"\n    Stupid Mode = 1  And run wvdial for the required service provider as follows:      wvdial airtel  A list of running commands should be visible on the shell, trying to establish PPP connection. Once PPP connection has been established, you will see a ppp0 IP. To check the status of wvdial and find out its IP open a new shell and use either of following:  Run ifconfig and find ppp0 in the list of network connections.      $ ifconfig  or      $ ifconfig ppp0  Check the network statistics for IP and their gateways and check the Iface column for ppp0      $ netstat -arn\n    * Kernel IP routing table\n\n    Destination Gateway Genmask Flags MSS Window irtt Iface\n    0.0.0.0 192.168.1.1 0.0.0.0 UG 0 0 0 eth0\n    192.168.1.0 0.0.0.0 255.255.255.0 U 0 0 0 eth0\n    192.168.7.0 0.0.0.0 255.255.255.252 U 0 0 0 usb0\n    192.200.1.21 0.0.0.0 255.255.255.255 UH 0 0 0 ppp0   Read the system messages as $ cat /var/log/messages    It lists all the attempts at establishing ppp communication using the modem and ips for the successful attempt. Now all that is left, is to route the network traffic over the gateway of ppp0 instead of eth0 so that GPRS communication is fully completed.  PPP connection has been established over GPRS using 2G module and wvdial.  After PPP has been established, the following is the status of the LEDs and GPIOs    STATUS LED D3 \u2013 It is continuously glowing, once the Modem was turned on.    SIGNAL LED D4 \u2013 It is now blinking at 64ms ON/300ms OFF . Earlier when PPP was not established but SIMcard was detected by modem, then it was blinking at 64ms ON/3000ms OFF.    STATUS GPIO23 \u2013 Its value is be 1, once modem was turned on.    ON/OFF GPIO45 \u2013 Its value should be 1.    RESET GPIO60 \u2013 Its value should always be 1.    You can alternately run wvdial for multiple service providers and store their wvdial.conf files too by this way also      $ wvdial -C /etc/wvdial.conf.provider_name  where wvdial.conf.provider_name is wvdial.conf for the SIM card currently inserted. Also, you can Wvdial in background to free up the shell instead of opening another new shell by :      $ wvdial   disown", 
            "title": "Wvdial Configuration for Debian Wheezy"
        }, 
        {
            "location": "/#faq", 
            "text": "Ques) How do I check that whether the PPP connection has been established or not?  Ans)  1) Use the command \u201cifconfig ppp0\u201d to check the network information. If a connection is established, an IP should be visible.  2) Details about the connection can be found in \u201c/var/log/messages\u201d. Issue following command :  \u201ctail \u2013f /var/log/messages\u201d  Ques) How do I configure the ppp connection for my sim card operator?  Ans)  You would mainly require the Username, Password and APN of the service provider to establish a PPP connection. Ensure \u201cwvdial\u201d package is installed.      \u201cdpkg \u2013l | grep wvdial\u201d  If wvdial is present, issue \u201cwvdialconf\u201d command. Then update the service provider information in the \"/etc/wvdial.conf\" file and you are good to go.", 
            "title": "FAQ"
        }
    ]
}